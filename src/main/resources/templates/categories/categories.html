<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
				xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
	<meta charset="utf-8" />
	<title>[[${pageTitle}]]</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
	<meta content="" name="author" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	
	<!-- App favicon -->
	<link rel="shortcut icon" href="images/favicon.ico">
	
 	<script th:src="@{/webjars/popper.js/2.9.2/umd/popper.min.js}"></script>
  	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
 	<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
 	
	<!-- App css -->
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{/css/icons.min.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{/css/app.min.css}" rel="stylesheet" type="text/css" />

</head>
<body id="body" class="dark-sidebar">
    
        <!-- leftbar-tab-menu -->      
        <div th:replace="fragments/left-sidebar" id="left-sidebar"></div>        

        <!-- Top Bar Start -->                          
       	<div th:replace="fragments/inc-header" id="inc-header"></div>                       

        <div class="page-wrapper">
            <div class="page-content-tab">

                <div class="container-fluid">
                    <!-- Page-Title -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="page-title-box">
                                <div class="float-end">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="#">Unikit</a>
                                        </li><!--end nav-item-->
                                        <li class="breadcrumb-item"><a href="#">Projects</a>
                                        </li><!--end nav-item-->
                                        <li class="breadcrumb-item active">Categories</li>
                                    </ol>
                                </div>
                                <h4 class="page-title">Danh Mục</h4>
                            </div>
                        </div>
                    </div>

                    <div class="row" style="margin-bottom: 20px;">
                    	<div class="col">
                        	<a class="btn btn-outline-blue btn-sm px-4 " th:href="@{/categories/new-category}">Thêm Danh Mục</a>
                        </div>
                    	<div class="col" style="text-align: right;">
                        	<a th:href="@{/users/export/csv}" type="button" class="btn btn-primary"><i class="fas fa-file-csv"></i></a>
                        	<a th:href="@{/users/export/excel}" type="button" class="btn btn-success"><i class="fas fa-file-excel"></i></a>
                        	<a th:href="@{/users/export/pdf}" type="button" class="btn btn-danger"><i class="fas fa-file-pdf"></i></a>
                        </div>           
                    </div><!--end row-->    
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <div class="row align-items-center">
                                        <div class="col">                      
                                            <h4 class="card-title">Tất cả danh mục</h4>             
                                        </div><!--end col-->       
                                        <div th:if="${message != null}"  class="alert alert-success text-center" align="center">[[${message}]]</div>                                
                                    </div>  <!--end row-->                                  
                                </div><!--end card-header-->
                                <div class="card-body">    
                                    <div class="table-responsive">
                                        <table class="table table-striped">
                                            <thead class="thead-light">
                                            <tr>                                            	                                          	
                                                <th>ID</th>
                                                <th>Image</th>
                                                <th>Name</th>
                                                <th>Alias</th>
                                             	<th th:replace="fragments/fragments :: column_link('enable', 'Status')"/>                                            	
                                                <th>Action</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="cat : ${listCategories}">
                                            	<td>[[${cat.id}]]</td>
                                            	<td>
                                            		<img class="img-fluid" style="width: 100px;height: 100px;" alt="" th:src="@{${cat.imagePath}}">
                                            	</td>
                                                <td>[[${cat.name}]]</td>
                                                <td>[[${cat.alias}]]</td>                                            
                                                <td>
                                                <a class="badge badge-soft-success fas fa-check-circle" th:if="${cat.enabled == true}" th:href="@{'/categories/' + ${cat.id} + '/enabled/false'}" title="Disable this category">Active</a>
                                                <a class="badge badge-soft-danger fas fa-check-circle" th:if="${cat.enabled == false}" th:href="@{'/categories/' + ${cat.id} + '/enabled/true'}" title="Enable this category">Inactive</a>
                                                
                                                </td>
                                                <td>                                                       
                                                    <a th:href="@{'/categories/edit/'+${cat.id}}"><i class="las la-pen text-secondary font-16"></i></a>
                                                    <a th:href="@{'/categories/delete/'+${cat.id}}" th:userId="${cat.id}" class="delete"><i class="las la-trash-alt text-secondary font-16"></i></a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
								<!-- notification -->									
									<div class="modal  text-center" id="comfirmModal" >
									    <div class="modal-dialog">
									        <div class="modal-content">
									            <div class="modal-header">
									                <h4 class="modal-title">Delete Comfirmtion</h4>
									                <button type="button" class="close"
									                    data-dismiss="modal">&times;</button>
									            </div>
									            <div class="modal-body">
									                <span id="comfirmText"></span>
									            </div>
									            <div class="modal-footer">
									                <a class="btn btn-success" href="" id="yes-btn">Yes</a>
									                <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
									            </div>
									        </div>
									    </div>
									</div>	
								<!-- end notification -->
								
                                    <div class="row">      
	                                    <div class="col">
	                                    </div>                               
                                        <div class="col-auto" th:if="${totalItems > 0}">
                                            <nav aria-label="...">
                                            <span>user từ [[${startCount}]] đến [[${endCount}]] của [[${totalItems}]]</span>
                                                <ul class="pagination pagination-sm mb-0">
	                                                <li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
	                                                	<a th:replace="fragments/fragments :: page_link('1', 'First')"></a>
	                                                </li>
                                                    <li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                                                        <a th:replace="fragments/fragments :: page_link(${currentPage - 1}, 'Previous')"></a>
                                                    </li>
                                                    <li th:class="${currentPage != i ? 'page-item' : 'page-item active'}" 
                                                    	th:each="i : ${#numbers.sequence(1, totalPages)}">
                                                    	<a th:replace="fragments/fragments :: page_link(${i}, ${i})"></a>
                                                    </li>                                                   
                                                    <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                                                        <a th:replace="fragments/fragments :: page_link(${currentPage + 1}, 'Next')"></a>
                                                    </li>
                                                    <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                                                    	<a th:replace="fragments/fragments :: page_link(${totalPages}, 'Last')">Last</a>
                                                    </li>
                                                </ul><!--end pagination-->
                                            </nav><!--end nav-->       
                                         </div> <!--end col-->   
                                         <div th:unless="${totalItems > 0}" style="text-align: center;">
                                         <strong>No users found</strong>
                                         </div>                            
                                    </div>                                 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Start Rightbar-->
                <div th:replace="fragments/right-bar" id="right-bar"></div>
                 
                <!--Start Footer-->
				<div th:replace="fragments/inc-footer" id="inc-footer"></div>          

            </div>
        </div>

        <!-- Javascript  --> 
        <script title="text/javascript">
            $(document).ready(function(){
                $(".delete").on("click",function(e){
                    e.preventDefault();
                    link = $(this);
                    userId = link.attr("userId");
                    $("#comfirmText").text("Bạn có chắc chắn muốn xoá danh mục id "+userId)
                    $("#yes-btn").attr("href",link.attr("href"));
                    $("#comfirmModal").modal("show");
                });
            });
            
            function clearFilter(){
				window.location = "[[@{/categories/list_categories}]]"
            }
        </script>

        <!-- App js -->
        <script src="js/app.js"></script>

</body>
</html>